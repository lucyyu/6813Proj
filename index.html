<!DOCTYPE html>
<html>
	<head>
		<title>Index</title>
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/main.css">

		<script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
		<script type="text/javascript" src="js/jquery-ui.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/data.js"></script>
		<script type="text/javascript" src="js/paddle.js"></script>

		<link href='http://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic' rel='stylesheet' type='text/css'>




		<script type="text/javascript">
			$(document).ready(function(){
				//draw paddle
				var canvas_p = document.getElementById("paddleCanvas");
                var context_p = canvas_p.getContext("2d");
                context_p.clearRect(0, 0, canvas_p.width, canvas_p.height);

	            var raw_paddle_img = new Image();
	            raw_paddle_img.onload = function(){
	            	context_p.drawImage(raw_paddle_img, 0, 0, 450, 450);
	            }
	            raw_paddle_img.src = "img/paddle.png"; 

	            //highting the component upon hovering 
	            $("#rubberBtn").mouseenter(function(){
	            	//NOTE: http://stackoverflow.com/questions/12387310/html5-drawimage-works-in-firefox-not-chrome
	            	//looks like this is one of the few drawImage method that would work in both chrome and firefox
	                var core_img = new Image();
		            core_img.src = "img/core_highlight.png"; 
		            core_img.onload = function(){
		                context_p.drawImage(core_img, 60, -30, 423, 400);
		            }

	            }).mouseleave(function(){
	            	context_p.clearRect(0, 0, canvas_p.width, canvas_p.height); 
	            	context_p.drawImage(raw_paddle_img, 0, 0, 450, 450); 
	            });

	            $("#bladeBtn").mouseenter(function(){
	                var blade_img = new Image();
		            blade_img.src = "img/blade_highlight.png"; 
		            blade_img.onload = function() {
		                context_p.drawImage(blade_img, 13, 15, 435, 435);
		            }

	            }).mouseleave(function(){
	            	context_p.clearRect(0, 0, canvas_p.width, canvas_p.height); 
	            	context_p.drawImage(raw_paddle_img, 0, 0, 450, 450); 
	            });



	            //draw diamond as a combination of 5 triangles
	            var canvas_d = document.getElementById("diamondCanvas"); 
	            var context_d = canvas_d.getContext("2d"); 

	            var radius = 80;
	            var slice_angle = 2*Math.PI/5;

	            context_d.save(); 
	            context_d.translate(canvas_d.width/2, canvas_d.height/2);
	            context_d.rotate(-Math.PI/180*54);

	            var gradient = context_d.createLinearGradient(0, 0, radius*Math.cos(slice_angle/2), 0);

	            gradient.addColorStop(0, "white");
	            gradient.addColorStop(1, "#B6B6B4"); 

	            context_d.fillStyle = gradient; 
	            context_d.strokeStyle = "black"; 

	            context_d.beginPath();
	            context_d.moveTo(0, 0);
	            context_d.lineTo(radius*Math.cos(slice_angle/2), radius*Math.sin(slice_angle/2));
	            context_d.lineTo(radius*Math.cos(-slice_angle/2), radius*Math.sin(-slice_angle/2));
	            context_d.closePath();
	            context_d.fill();
	            context_d.stroke(); 

	            for (var i=0; i<4; i++){

		            context_d.rotate(-Math.PI/180*72);

		            context_d.beginPath();
		            context_d.moveTo(0, 0);
		            context_d.lineTo(radius*Math.cos(slice_angle/2), radius*Math.sin(slice_angle/2));
		            context_d.lineTo(radius*Math.cos(-slice_angle/2), radius*Math.sin(-slice_angle/2));
		            context_d.closePath();
		            context_d.fill();
		            context_d.stroke(); 
		        }

		        context_d.restore(); 

		        //draw performance parameters
		        var params = {speed:0.8, spin:0.7, control:1, weight:0.95, price:0.85}; 
		        var keys = Object.keys(params); 

		        var current_angle = Math.PI*54/180;
		        context_d.translate(canvas_d.width/2, canvas_d.height/2); 

		        context_d.beginPath();
		        context_d.moveTo(radius*params['speed']*Math.cos(current_angle), radius*params['speed']*Math.sin(current_angle));
		        for (var i = 1; i < 5; i++) {
		        	current_angle += Math.PI*72/180; 
		        	context_d.lineTo(radius*params[keys[i]]*Math.cos(current_angle), radius*params[keys[i]]*Math.sin(current_angle));
		        }
		        context_d.closePath(); 
		        context_d.fillStyle = "rgba(132,132,130,0.3)";
		        context_d.fill(); 

			})
		</script>
	</head>
	<body>
		<div class="header">TABLE TENNIS PRO</div>

		<div class="container">
			<div class="row">
			  <div class="col-md-5 col-md-offset-1">
			  		<canvas id="paddleCanvas" width="450" height="450">
                    Your browser does not support the HTML5 canvas tag.</canvas>
                    <canvas id="diamondCanvas" width="220" height="220">
                    Your browser does not support the HTML5 canvas tag.</canvas>
			  </div>
			  <div class="col-md-5">
			  	<div class="productBtn" id="bladeBtn" data-toggle="modal" data-target="#blade-modal">
			  		BLADE
			  	</div>
			  	<div class="productBtn" id="rubberBtn" data-toggle="modal" data-target="#rubber-modal">
			  		RUBBER
			  	</div>
			  	<div class="productBtn" id="glueBtn" data-toggle="modal" data-target="#glue-modal">
			  		GLUE
			  	</div>
			  	<div id="priceLabel">
			  		Total: $<span id="total-price">0</span>
			  	</div>
			  </div>
			</div>
		</div>
		<div id="blade-summary"></div>
		<div id="rubber-summary"></div>
		<div id="glue-summary"></div>


		<div class="modal fade" id="blade-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title">Blade</h4>
		      </div>
		      <div class="modal-body" id="blade-modal-body">
		      	
		      </div>
		      <div class="modal-footer">
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->

		<div class="modal fade" id="rubber-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title">Rubber</h4>
		      </div>
		      <div class="modal-body" id="rubber-modal-body">
		      	
		      </div>
		      <div class="modal-footer">
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->

		<div class="modal fade" id="glue-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title">Glue</h4>
		      </div>
		      <div class="modal-body" id="glue-modal-body">
		      	
		      </div>
		      <div class="modal-footer">
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->

	</body>
</html>
